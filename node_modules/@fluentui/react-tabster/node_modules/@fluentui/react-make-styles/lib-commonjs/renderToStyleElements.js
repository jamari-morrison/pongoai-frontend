"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.renderToStyleElements = void 0;

var tslib_1 = /*#__PURE__*/require("tslib");

var make_styles_1 = /*#__PURE__*/require("@fluentui/make-styles");

var React = /*#__PURE__*/require("react");
/**
 * This method returns a list of <style> React elements with the rendered CSS. This is useful for Server-Side rendering.
 *
 * @public
 */


function renderToStyleElements(renderer) {
  var styles = make_styles_1.styleBucketOrdering.reduce(function (acc, bucketName) {
    var _a;

    return tslib_1.__assign(tslib_1.__assign({}, acc), (_a = {}, _a[bucketName] = [], _a));
  }, {}); // eslint-disable-next-line guard-for-in

  for (var cssRule in renderer.insertionCache) {
    var bucketName = renderer.insertionCache[cssRule];
    styles[bucketName].push(cssRule);
  }

  return Object.keys(styles).map(function (bucketName) {
    var cssRules = styles[bucketName].join(''); // We don't want to create empty style elements

    if (cssRules.length === 0) {
      return null;
    }

    return React.createElement('style', {
      key: bucketName,
      // TODO: support "nonce"
      // ...renderer.styleNodeAttributes,
      'data-make-styles-bucket': bucketName || 'default',
      'data-make-styles-rehydration': true,
      dangerouslySetInnerHTML: {
        __html: cssRules
      }
    });
  }).filter(Boolean);
}

exports.renderToStyleElements = renderToStyleElements;
//# sourceMappingURL=renderToStyleElements.js.map